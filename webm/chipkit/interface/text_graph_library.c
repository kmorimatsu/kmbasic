// text-graph-library.c
//　テキスト＋グラフィックビデオ出力用ライブラリ　by K.Tanaka

#include "lib_video_megalopa.h"

const unsigned char __attribute__((__weak__ , aligned (4))) FontData[256*8]={
//フォントデータ
//キャラクタコード順に8バイトずつ、上位ビットが左
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x08,0x0C,0xFE,0xFE,0x0C,0x08,0x00,
	0x00,0x20,0x60,0xFE,0xFE,0x60,0x20,0x00,
	0x18,0x3C,0x7E,0x18,0x18,0x18,0x18,0x00,
	0x00,0x18,0x18,0x18,0x18,0x7E,0x3C,0x18,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x30,0x30,0x30,0x30,0x00,0x00,0x30,0x00,
	0x6C,0x6C,0x6C,0x00,0x00,0x00,0x00,0x00,
	0x6C,0x6C,0xFE,0x6C,0xFE,0x6C,0x6C,0x00,
	0x18,0x7E,0xD8,0x7E,0x1A,0xFE,0x18,0x00,
	0xE0,0xE6,0x0C,0x18,0x30,0x6E,0xCE,0x00,
	0x78,0xCC,0xD8,0x70,0xDE,0xCC,0x76,0x00,
	0x0C,0x18,0x30,0x00,0x00,0x00,0x00,0x00,
	0x0C,0x18,0x30,0x30,0x30,0x18,0x0C,0x00,
	0x30,0x18,0x0C,0x0C,0x0C,0x18,0x30,0x00,
	0xD6,0x7C,0x38,0xFE,0x38,0x7C,0xD6,0x00,
	0x00,0x30,0x30,0xFC,0x30,0x30,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x60,
	0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x38,0x38,0x00,
	0x00,0x06,0x0C,0x18,0x30,0x60,0xC0,0x00,
	0x7C,0xC6,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,
	0x18,0x38,0x78,0x18,0x18,0x18,0x7E,0x00,
	0x7C,0xC6,0x06,0x1C,0x70,0xC0,0xFE,0x00,
	0x7C,0xC6,0x06,0x3C,0x06,0xC6,0x7C,0x00,
	0x0C,0x1C,0x3C,0x6C,0xFE,0x0C,0x0C,0x00,
	0xFE,0xC0,0xF8,0x0C,0x06,0xCC,0x78,0x00,
	0x3C,0x60,0xC0,0xFC,0xC6,0xC6,0x7C,0x00,
	0xFE,0xC6,0x0C,0x18,0x30,0x30,0x30,0x00,
	0x7C,0xC6,0xC6,0x7C,0xC6,0xC6,0x7C,0x00,
	0x7C,0xC6,0xC6,0x7E,0x06,0x0C,0x78,0x00,
	0x00,0x30,0x00,0x00,0x00,0x30,0x00,0x00,
	0x00,0x30,0x00,0x00,0x00,0x30,0x30,0x60,
	0x0C,0x18,0x30,0x60,0x30,0x18,0x0C,0x00,
	0x00,0x00,0xFE,0x00,0xFE,0x00,0x00,0x00,
	0x60,0x30,0x18,0x0C,0x18,0x30,0x60,0x00,
	0x7C,0xC6,0x06,0x1C,0x30,0x00,0x30,0x00,
	0x3C,0x66,0xDE,0xF6,0xDC,0x60,0x3E,0x00,
	0x38,0x6C,0xC6,0xFE,0xC6,0xC6,0xC6,0x00,
	0xFC,0x66,0x66,0x7C,0x66,0x66,0xFC,0x00,
	0x3C,0x66,0xC0,0xC0,0xC0,0x66,0x3C,0x00,
	0xF8,0x6C,0x66,0x66,0x66,0x6C,0xF8,0x00,
	0xFE,0xC0,0xC0,0xF8,0xC0,0xC0,0xFE,0x00,
	0xFE,0xC0,0xC0,0xF8,0xC0,0xC0,0xC0,0x00,
	0x3C,0x66,0xC0,0xCE,0xC6,0x66,0x3C,0x00,
	0xC6,0xC6,0xC6,0xFE,0xC6,0xC6,0xC6,0x00,
	0x3C,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,
	0x1E,0x0C,0x0C,0x0C,0x0C,0xCC,0x78,0x00,
	0xC6,0xCC,0xD8,0xF0,0xD8,0xCC,0xC6,0x00,
	0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xFE,0x00,
	0xC6,0xEE,0xFE,0xD6,0xC6,0xC6,0xC6,0x00,
	0xC6,0xE6,0xF6,0xDE,0xCE,0xC6,0xC6,0x00,
	0x38,0x6C,0xC6,0xC6,0xC6,0x6C,0x38,0x00,
	0xFC,0xC6,0xC6,0xFC,0xC0,0xC0,0xC0,0x00,
	0x38,0x6C,0xC6,0xC6,0xDE,0x6C,0x3E,0x00,
	0xFC,0xC6,0xC6,0xFC,0xD8,0xCC,0xC6,0x00,
	0x7C,0xC6,0xC0,0x7C,0x06,0xC6,0x7C,0x00,
	0x7E,0x18,0x18,0x18,0x18,0x18,0x18,0x00,
	0xC6,0xC6,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,
	0xC6,0xC6,0xC6,0x6C,0x6C,0x38,0x38,0x00,
	0xC6,0xC6,0xC6,0xD6,0xFE,0xEE,0xC6,0x00,
	0xC6,0xC6,0x6C,0x38,0x6C,0xC6,0xC6,0x00,
	0xCC,0xCC,0xCC,0x78,0x30,0x30,0x30,0x00,
	0xFE,0x06,0x0C,0x38,0x60,0xC0,0xFE,0x00,
	0x3C,0x30,0x30,0x30,0x30,0x30,0x3C,0x00,
	0xCC,0xCC,0x78,0xFC,0x30,0xFC,0x30,0x00,
	0x3C,0x0C,0x0C,0x0C,0x0C,0x0C,0x3C,0x00,
	0x30,0x78,0xCC,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,
	0x30,0x18,0x0C,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x7C,0x0C,0x7C,0xCC,0x7E,0x00,
	0xC0,0xC0,0xFC,0xE6,0xC6,0xE6,0xFC,0x00,
	0x00,0x00,0x7C,0xC6,0xC0,0xC6,0x7C,0x00,
	0x06,0x06,0x7E,0xCE,0xC6,0xCE,0x7E,0x00,
	0x00,0x00,0x7C,0xC6,0xFE,0xC0,0x7C,0x00,
	0x1C,0x36,0x30,0xFC,0x30,0x30,0x30,0x00,
	0x00,0x00,0x7E,0xCE,0xCE,0x7E,0x06,0x7C,
	0xC0,0xC0,0xFC,0xE6,0xC6,0xC6,0xC6,0x00,
	0x18,0x00,0x38,0x18,0x18,0x18,0x3C,0x00,
	0x0C,0x00,0x1C,0x0C,0x0C,0x0C,0xCC,0x78,
	0xC0,0xC0,0xCC,0xD8,0xF0,0xF8,0xCC,0x00,
	0x38,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,
	0x00,0x00,0xFC,0xB6,0xB6,0xB6,0xB6,0x00,
	0x00,0x00,0xFC,0xE6,0xC6,0xC6,0xC6,0x00,
	0x00,0x00,0x7C,0xC6,0xC6,0xC6,0x7C,0x00,
	0x00,0x00,0xFC,0xE6,0xE6,0xFC,0xC0,0xC0,
	0x00,0x00,0x7E,0xCE,0xCE,0x7E,0x06,0x06,
	0x00,0x00,0xDC,0xE6,0xC0,0xC0,0xC0,0x00,
	0x00,0x00,0x7E,0xC0,0x7C,0x06,0xFC,0x00,
	0x30,0x30,0xFC,0x30,0x30,0x36,0x1C,0x00,
	0x00,0x00,0xC6,0xC6,0xC6,0xCE,0x76,0x00,
	0x00,0x00,0xC6,0xC6,0xC6,0x6C,0x38,0x00,
	0x00,0x00,0x86,0xB6,0xB6,0xB6,0xFC,0x00,
	0x00,0x00,0xC6,0x6C,0x38,0x6C,0xC6,0x00,
	0x00,0x00,0xC6,0xC6,0xCE,0x7E,0x06,0x7C,
	0x00,0x00,0xFE,0x0C,0x38,0x60,0xFE,0x00,
	0x3C,0x60,0x60,0xC0,0x60,0x60,0x3C,0x00,
	0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x00,
	0xF0,0x18,0x18,0x0C,0x18,0x18,0xF0,0x00,
	0x60,0xB6,0x1C,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,
	0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,
	0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,
	0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,
	0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,
	0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
	0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,
	0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,
	0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,
	0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,
	0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,
	0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,
	0x18,0x18,0x18,0x18,0xFF,0x18,0x18,0x18,
	0x18,0x18,0x18,0x18,0xFF,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0xFF,0x18,0x18,0x18,
	0x18,0x18,0x18,0x18,0xF8,0x18,0x18,0x18,
	0x18,0x18,0x18,0x18,0x1F,0x18,0x18,0x18,
	0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,
	0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,
	0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,
	0x00,0x00,0x00,0x00,0x1F,0x18,0x18,0x18,
	0x00,0x00,0x00,0x00,0xF8,0x18,0x18,0x18,
	0x18,0x18,0x18,0x18,0x1F,0x00,0x00,0x00,
	0x18,0x18,0x18,0x18,0xF8,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x07,0x0C,0x18,0x18,
	0x00,0x00,0x00,0x00,0xE0,0x30,0x18,0x18,
	0x18,0x18,0x18,0x0C,0x07,0x00,0x00,0x00,
	0x18,0x18,0x18,0x30,0xE0,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x78,0x68,0x78,0x00,
	0x78,0x60,0x60,0x60,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x18,0x18,0x18,0x78,0x00,
	0x00,0x00,0x00,0x00,0x60,0x30,0x18,0x00,
	0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,
	0xFE,0x06,0x06,0xFE,0x06,0x0C,0x78,0x00,
	0x00,0x00,0xFC,0x0C,0x38,0x30,0x60,0x00,
	0x00,0x00,0x0C,0x18,0x38,0x78,0x18,0x00,
	0x00,0x00,0x30,0xFC,0xCC,0x0C,0x38,0x00,
	0x00,0x00,0x00,0xFC,0x30,0x30,0xFC,0x00,
	0x00,0x00,0x18,0xFC,0x38,0x78,0xD8,0x00,
	0x00,0x00,0x60,0xFC,0x6C,0x68,0x60,0x00,
	0x00,0x00,0x00,0x78,0x18,0x18,0xFC,0x00,
	0x00,0x00,0x7C,0x0C,0x7C,0x0C,0x7C,0x00,
	0x00,0x00,0x00,0xAC,0xAC,0x0C,0x38,0x00,
	0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,
	0xFE,0x06,0x06,0x34,0x38,0x30,0x60,0x00,
	0x06,0x0C,0x18,0x38,0x78,0xD8,0x18,0x00,
	0x18,0xFE,0xC6,0xC6,0x06,0x0C,0x38,0x00,
	0x00,0x7E,0x18,0x18,0x18,0x18,0x7E,0x00,
	0x18,0xFE,0x18,0x38,0x78,0xD8,0x18,0x00,
	0x30,0xFE,0x36,0x36,0x36,0x36,0x6C,0x00,
	0x18,0x7E,0x18,0x7E,0x18,0x18,0x18,0x00,
	0x3E,0x66,0xC6,0x0C,0x18,0x30,0xE0,0x00,
	0x60,0x7E,0xD8,0x18,0x18,0x18,0x30,0x00,
	0x00,0xFE,0x06,0x06,0x06,0x06,0xFE,0x00,
	0x6C,0xFE,0x6C,0x0C,0x0C,0x18,0x30,0x00,
	0x00,0xF0,0x00,0xF6,0x06,0x0C,0xF8,0x00,
	0xFE,0x06,0x0C,0x18,0x38,0x6C,0xC6,0x00,
	0x60,0xFE,0x66,0x6C,0x60,0x60,0x3E,0x00,
	0xC6,0xC6,0x66,0x06,0x0C,0x18,0xF0,0x00,
	0x3E,0x66,0xE6,0x3C,0x18,0x30,0xE0,0x00,
	0x0C,0x78,0x18,0xFE,0x18,0x18,0xF0,0x00,
	0x00,0xD6,0xD6,0xD6,0x0C,0x18,0xF0,0x00,
	0x7C,0x00,0xFE,0x18,0x18,0x30,0x60,0x00,
	0x30,0x30,0x38,0x3C,0x36,0x30,0x30,0x00,
	0x18,0x18,0xFE,0x18,0x18,0x30,0x60,0x00,
	0x00,0x7C,0x00,0x00,0x00,0x00,0xFE,0x00,
	0x00,0x7E,0x06,0x6C,0x18,0x36,0x60,0x00,
	0x18,0x7E,0x0C,0x18,0x3C,0x7E,0x18,0x00,
	0x06,0x06,0x06,0x0C,0x18,0x30,0x60,0x00,
	0x30,0x18,0x0C,0xC6,0xC6,0xC6,0xC6,0x00,
	0xC0,0xC0,0xFE,0xC0,0xC0,0xC0,0x7E,0x00,
	0x00,0xFE,0x06,0x06,0x0C,0x18,0x70,0x00,
	0x00,0x30,0x78,0xCC,0x06,0x06,0x00,0x00,
	0x18,0x18,0xFE,0x18,0xDB,0xDB,0x18,0x00,
	0xFE,0x06,0x06,0x6C,0x38,0x30,0x18,0x00,
	0x00,0x3C,0x00,0x3C,0x00,0x7C,0x06,0x00,
	0x0C,0x18,0x30,0x60,0xCC,0xFC,0x06,0x00,
	0x02,0x36,0x3C,0x18,0x3C,0x6C,0xC0,0x00,
	0x00,0xFE,0x30,0xFE,0x30,0x30,0x3E,0x00,
	0x30,0x30,0xFE,0x36,0x3C,0x30,0x30,0x00,
	0x00,0x78,0x18,0x18,0x18,0x18,0xFE,0x00,
	0xFE,0x06,0x06,0xFE,0x06,0x06,0xFE,0x00,
	0x7C,0x00,0xFE,0x06,0x0C,0x18,0x30,0x00,
	0xC6,0xC6,0xC6,0x06,0x06,0x0C,0x38,0x00,
	0x6C,0x6C,0x6C,0x6E,0x6E,0x6C,0xC8,0x00,
	0x60,0x60,0x60,0x66,0x6C,0x78,0x70,0x00,
	0x00,0xFE,0xC6,0xC6,0xC6,0xC6,0xFE,0x00,
	0x00,0xFE,0xC6,0xC6,0x06,0x0C,0x38,0x00,
	0x00,0xF0,0x06,0x06,0x0C,0x18,0xF0,0x00,
	0x18,0xCC,0x60,0x00,0x00,0x00,0x00,0x00,
	0x70,0xD8,0x70,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,
	0x18,0x18,0x1F,0x18,0x18,0x1F,0x18,0x18,
	0x18,0x18,0xFF,0x18,0x18,0xFF,0x18,0x18,
	0x18,0x18,0xF8,0x18,0x18,0xF8,0x18,0x18,
	0x01,0x03,0x07,0x0F,0x1F,0x3F,0x7F,0xFF,
	0x80,0xC0,0xE0,0xF0,0xF8,0xFC,0xFE,0xFF,
	0xFF,0x7F,0x3F,0x1F,0x0F,0x07,0x03,0x01,
	0xFF,0xFE,0xFC,0xF8,0xF0,0xE0,0xC0,0x80,
	0x10,0x38,0x7C,0xFE,0xFE,0x38,0x7C,0x00,
	0x6C,0xFE,0xFE,0xFE,0x7C,0x38,0x10,0x00,
	0x10,0x38,0x7C,0xFE,0x7C,0x38,0x10,0x00,
	0x38,0x38,0xFE,0xFE,0xD6,0x10,0x7C,0x00,
	0x00,0x3C,0x7E,0x7E,0x7E,0x7E,0x3C,0x00,
	0x00,0x7C,0xC6,0xC6,0xC6,0xC6,0x7C,0x00,
	0x03,0x06,0x0C,0x18,0x30,0x60,0xC0,0x80,
	0x80,0xC0,0x60,0x30,0x18,0x0C,0x06,0x03,
	0x83,0xC6,0x6C,0x38,0x38,0x6C,0xC6,0x83,
	0xFE,0xB6,0xB6,0xFE,0x86,0x86,0x86,0x00,
	0xC0,0xFE,0xD8,0x7E,0x58,0xFE,0x18,0x00,
	0x7E,0x66,0x7E,0x66,0x7E,0x66,0xC6,0x00,
	0xFE,0xC6,0xC6,0xFE,0xC6,0xC6,0xFE,0x00,
	0x06,0xEF,0xA6,0xFF,0xA2,0xFF,0x0A,0x06,
	0x00,0x38,0x6C,0xC6,0x7C,0x34,0x6C,0x00,
	0xFC,0x6C,0xFE,0x6E,0xF6,0xEC,0x6C,0x78,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
const unsigned char __attribute__((__weak__ , aligned (4))) FontData2[256*8]={
//横6ドットフォントデータ、キャラクタコード順に8バイトずつ、上位ビットが左（下位2ビットは無効）
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x20,0x10,0xf8,0x10,0x20,0x00,0x00,
	0x00,0x20,0x40,0xf8,0x40,0x20,0x00,0x00,
	0x20,0x70,0xa8,0x20,0x20,0x20,0x20,0x00,
	0x20,0x20,0x20,0x20,0xa8,0x70,0x20,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x20,0x20,0x20,0x20,0x20,0x00,0x20,0x00,
	0x50,0x50,0xa0,0x00,0x00,0x00,0x00,0x00,
	0x50,0xf8,0x50,0x50,0x50,0xf8,0x50,0x00,
	0x20,0x78,0xa0,0x70,0x28,0xf0,0x20,0x00,
	0xc0,0xc8,0x10,0x20,0x40,0x98,0x18,0x00,
	0x20,0x50,0x50,0x60,0xa8,0x90,0x68,0x00,
	0x40,0x40,0x80,0x00,0x00,0x00,0x00,0x00,
	0x08,0x10,0x20,0x20,0x20,0x10,0x08,0x00,
	0x80,0x40,0x20,0x20,0x20,0x40,0x80,0x00,
	0x00,0x20,0xa8,0x70,0xa8,0x20,0x00,0x00,
	0x00,0x20,0x20,0xf8,0x20,0x20,0x00,0x00,
	0x00,0x00,0x00,0x00,0xc0,0x40,0x80,0x00,
	0x00,0x00,0x00,0xf8,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0xc0,0xc0,0x00,
	0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,
	0x70,0x88,0x98,0xa8,0xc8,0x88,0x70,0x00,
	0x20,0x60,0x20,0x20,0x20,0x20,0x70,0x00,
	0x70,0x88,0x08,0x30,0x40,0x80,0xf8,0x00,
	0x70,0x88,0x08,0x30,0x08,0x88,0x70,0x00,
	0x10,0x30,0x50,0x90,0xf8,0x10,0x10,0x00,
	0xf8,0x80,0xf0,0x88,0x08,0x88,0x70,0x00,
	0x70,0x88,0x80,0xf0,0x88,0x88,0x70,0x00,
	0xf8,0x08,0x10,0x20,0x20,0x40,0x40,0x00,
	0x70,0x88,0x88,0x70,0x88,0x88,0x70,0x00,
	0x70,0x88,0x88,0x78,0x08,0x88,0x70,0x00,
	0x00,0x60,0x60,0x00,0x60,0x60,0x00,0x00,
	0x00,0x60,0x60,0x00,0x60,0x20,0x40,0x00,
	0x00,0x18,0x60,0x80,0x60,0x18,0x00,0x00,
	0x00,0x00,0xf8,0x00,0xf8,0x00,0x00,0x00,
	0x00,0xc0,0x30,0x08,0x30,0xc0,0x00,0x00,
	0x70,0x88,0x08,0x30,0x20,0x00,0x20,0x00,
	0x70,0x88,0xb8,0xa8,0xb0,0x88,0x70,0x00,
	0x20,0x20,0x50,0x50,0x70,0x88,0x88,0x00,
	0xf0,0x88,0x88,0xf0,0x88,0x88,0xf0,0x00,
	0x30,0x48,0x80,0x80,0x80,0x48,0x30,0x00,
	0xe0,0x90,0x88,0x88,0x88,0x90,0xe0,0x00,
	0xf8,0x80,0x80,0xf0,0x80,0x80,0xf8,0x00,
	0xf8,0x80,0x80,0xf0,0x80,0x80,0x80,0x00,
	0x30,0x48,0x80,0x98,0x88,0x48,0x30,0x00,
	0x88,0x88,0x88,0xf8,0x88,0x88,0x88,0x00,
	0x70,0x20,0x20,0x20,0x20,0x20,0x70,0x00,
	0x08,0x08,0x08,0x08,0x08,0x88,0x70,0x00,
	0x88,0x90,0xa0,0xc0,0xa0,0x90,0x88,0x00,
	0x80,0x80,0x80,0x80,0x80,0x80,0xf8,0x00,
	0x88,0x88,0xd8,0xa8,0xa8,0x88,0x88,0x00,
	0x88,0x88,0xc8,0xa8,0x98,0x88,0x88,0x00,
	0x70,0x88,0x88,0x88,0x88,0x88,0x70,0x00,
	0xf0,0x88,0x88,0xf0,0x80,0x80,0x80,0x00,
	0x70,0x88,0x88,0x88,0xa8,0x90,0x68,0x00,
	0xf0,0x88,0x88,0xf0,0xa0,0x90,0x88,0x00,
	0x70,0x88,0x80,0x70,0x08,0x88,0x70,0x00,
	0xf8,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
	0x88,0x88,0x88,0x88,0x88,0x88,0x70,0x00,
	0x88,0x88,0x50,0x50,0x50,0x20,0x20,0x00,
	0xa8,0xa8,0xa8,0xa8,0x50,0x50,0x50,0x00,
	0x88,0x50,0x50,0x20,0x50,0x50,0x88,0x00,
	0x88,0x50,0x50,0x20,0x20,0x20,0x20,0x00,
	0xf8,0x08,0x10,0x20,0x40,0x80,0xf8,0x00,
	0x38,0x20,0x20,0x20,0x20,0x20,0x38,0x00,
	0x88,0x50,0xf8,0x20,0xf8,0x20,0x20,0x00,
	0xe0,0x20,0x20,0x20,0x20,0x20,0xe0,0x00,
	0x20,0x50,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x00,
	0x40,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x30,0x08,0x38,0x48,0x38,0x00,
	0x40,0x40,0x70,0x48,0x48,0x48,0x70,0x00,
	0x00,0x00,0x30,0x48,0x40,0x48,0x30,0x00,
	0x08,0x08,0x38,0x48,0x48,0x48,0x38,0x00,
	0x00,0x00,0x30,0x48,0x78,0x40,0x30,0x00,
	0x18,0x20,0x70,0x20,0x20,0x20,0x20,0x00,
	0x00,0x00,0x38,0x48,0x38,0x08,0x30,0x00,
	0x40,0x40,0x70,0x48,0x48,0x48,0x48,0x00,
	0x20,0x00,0x20,0x20,0x20,0x20,0x20,0x00,
	0x10,0x00,0x10,0x10,0x10,0x10,0x60,0x00,
	0x40,0x40,0x48,0x50,0x60,0x50,0x48,0x00,
	0x60,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
	0x00,0x00,0xf0,0xa8,0xa8,0xa8,0xa8,0x00,
	0x00,0x00,0x70,0x48,0x48,0x48,0x48,0x00,
	0x00,0x00,0x30,0x48,0x48,0x48,0x30,0x00,
	0x00,0x00,0x70,0x48,0x70,0x40,0x40,0x00,
	0x00,0x00,0x38,0x48,0x38,0x08,0x08,0x00,
	0x00,0x00,0x58,0x60,0x40,0x40,0x40,0x00,
	0x00,0x00,0x38,0x40,0x30,0x08,0x70,0x00,
	0x00,0x20,0x78,0x20,0x20,0x20,0x18,0x00,
	0x00,0x00,0x48,0x48,0x48,0x48,0x38,0x00,
	0x00,0x00,0x48,0x48,0x48,0x50,0x20,0x00,
	0x00,0x00,0xa8,0xa8,0xa8,0x50,0x50,0x00,
	0x00,0x00,0x48,0x48,0x30,0x48,0x48,0x00,
	0x00,0x00,0x48,0x48,0x28,0x10,0x60,0x00,
	0x00,0x00,0x78,0x08,0x10,0x20,0x78,0x00,
	0x18,0x20,0x20,0x40,0x20,0x20,0x18,0x00,
	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
	0xc0,0x20,0x20,0x10,0x20,0x20,0xc0,0x00,
	0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xfc,
	0x00,0x00,0x00,0x00,0x00,0x00,0xfc,0xfc,
	0x00,0x00,0x00,0x00,0x00,0xfc,0xfc,0xfc,
	0x00,0x00,0x00,0x00,0xfc,0xfc,0xfc,0xfc,
	0x00,0x00,0x00,0xfc,0xfc,0xfc,0xfc,0xfc,
	0x00,0x00,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
	0x00,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
	0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
	0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
	0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,
	0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,
	0xe0,0xe0,0xe0,0xe0,0xe0,0xe0,0xe0,0xe0,
	0xf0,0xf0,0xf0,0xf0,0xf0,0xf0,0xf0,0xf0,
	0xf8,0xf8,0xf8,0xf8,0xf8,0xf8,0xf8,0xf8,
	0xf8,0xf8,0xf8,0xf8,0xf8,0xf8,0xf8,0xf8,
	0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
	0x20,0x20,0x20,0xfc,0x20,0x20,0x20,0x20,
	0x20,0x20,0x20,0xfc,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0xfc,0x20,0x20,0x20,0x20,
	0x20,0x20,0x20,0xe0,0x20,0x20,0x20,0x20,
	0x20,0x20,0x20,0x3c,0x20,0x20,0x20,0x20,
	0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0xfc,0x00,0x00,0x00,0x00,
	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
	0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,
	0x00,0x00,0x00,0x3c,0x20,0x20,0x20,0x20,
	0x00,0x00,0x00,0xe0,0x20,0x20,0x20,0x20,
	0x20,0x20,0x20,0x3c,0x00,0x00,0x00,0x00,
	0x20,0x20,0x20,0xe0,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x0c,0x10,0x20,0x20,0x20,
	0x00,0x00,0x00,0x80,0x40,0x20,0x20,0x20,
	0x20,0x20,0x10,0x0c,0x00,0x00,0x00,0x00,
	0x20,0x20,0x40,0x80,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x40,0xa0,0x40,0x00,
	0x38,0x20,0x20,0x20,0x20,0x00,0x00,0x00,
	0x00,0x00,0x20,0x20,0x20,0x20,0xe0,0x00,
	0x00,0x00,0x00,0x00,0x00,0x80,0x40,0x00,
	0x00,0x00,0x00,0x60,0x60,0x00,0x00,0x00,
	0x00,0xf8,0x08,0x78,0x08,0x10,0x60,0x00,
	0x00,0x00,0xf8,0x28,0x30,0x20,0x40,0x00,
	0x00,0x00,0x08,0x10,0x30,0xd0,0x10,0x00,
	0x00,0x00,0x20,0xf8,0x88,0x10,0x60,0x00,
	0x00,0x00,0x00,0x70,0x20,0x20,0xf8,0x00,
	0x00,0x00,0x10,0xf8,0x30,0xd0,0x30,0x00,
	0x00,0x00,0x40,0xf8,0x48,0x20,0x20,0x00,
	0x00,0x00,0x00,0x70,0x10,0x10,0xf8,0x00,
	0x00,0x00,0x78,0x08,0x38,0x08,0x78,0x00,
	0x00,0x00,0x00,0xa8,0xa8,0x10,0x60,0x00,
	0x00,0x00,0x80,0x78,0x00,0x00,0x00,0x00,
	0xf8,0x08,0x28,0x30,0x20,0x20,0x40,0x00,
	0x08,0x08,0x10,0x30,0xd0,0x10,0x10,0x00,
	0x20,0xf8,0x88,0x08,0x08,0x10,0x60,0x00,
	0x00,0x70,0x20,0x20,0x20,0xf8,0x00,0x00,
	0x10,0xf8,0x10,0x30,0x50,0x90,0x30,0x00,
	0x20,0xf8,0x28,0x28,0x48,0x48,0x98,0x00,
	0x20,0xf8,0x20,0x20,0xf8,0x20,0x20,0x00,
	0x20,0x38,0x48,0x88,0x10,0x20,0xc0,0x00,
	0x40,0x78,0x50,0x90,0x10,0x10,0x20,0x00,
	0x00,0xf8,0x08,0x08,0x08,0x08,0xf8,0x00,
	0x50,0xf8,0x50,0x50,0x10,0x20,0x40,0x00,
	0x80,0x40,0x88,0x48,0x10,0x20,0xc0,0x00,
	0x00,0xf8,0x08,0x10,0x20,0x50,0x88,0x00,
	0x40,0x40,0xf8,0x48,0x50,0x40,0x38,0x00,
	0x88,0x48,0x48,0x10,0x10,0x20,0x40,0x00,
	0x20,0x38,0x48,0xa8,0x10,0x20,0xc0,0x00,
	0x10,0x60,0x20,0xf8,0x20,0x20,0x40,0x00,
	0x00,0xa8,0xa8,0xa8,0x08,0x10,0x60,0x00,
	0x70,0x00,0xf8,0x20,0x20,0x20,0x40,0x00,
	0x40,0x40,0x40,0x60,0x50,0x40,0x40,0x00,
	0x20,0x20,0xf8,0x20,0x20,0x20,0x40,0x00,
	0x00,0x70,0x00,0x00,0x00,0xf8,0x00,0x00,
	0x00,0xf8,0x08,0x70,0x10,0x28,0xc0,0x00,
	0x20,0xf8,0x10,0x20,0x70,0xa8,0x20,0x00,
	0x10,0x10,0x10,0x20,0x20,0x40,0x80,0x00,
	0x00,0x50,0x50,0x50,0x48,0x88,0x88,0x00,
	0x80,0x80,0x98,0xe0,0x80,0x80,0x78,0x00,
	0x00,0xf8,0x08,0x08,0x10,0x20,0x40,0x00,
	0x00,0x00,0x40,0xa0,0x10,0x08,0x00,0x00,
	0x20,0x20,0xf8,0x20,0xa8,0xa8,0x20,0x00,
	0x00,0xf8,0x08,0x10,0x60,0x20,0x10,0x00,
	0x60,0x18,0x20,0x10,0x00,0x60,0x18,0x00,
	0x20,0x20,0x20,0x40,0x40,0x90,0xe8,0x00,
	0x08,0x08,0x68,0x10,0x10,0x28,0xc0,0x00,
	0x70,0x20,0x20,0xf8,0x20,0x20,0x18,0x00,
	0x40,0xf8,0x48,0x50,0x20,0x20,0x20,0x00,
	0x00,0x70,0x10,0x10,0x10,0xf8,0x00,0x00,
	0x00,0xf8,0x08,0x78,0x08,0x08,0xf8,0x00,
	0x70,0x00,0xf8,0x08,0x08,0x10,0x60,0x00,
	0x48,0x48,0x48,0x48,0x08,0x10,0x20,0x00,
	0x10,0x50,0x50,0x50,0x50,0x58,0x90,0x00,
	0x40,0x40,0x40,0x40,0x48,0x50,0x60,0x00,
	0x00,0xf8,0x88,0x88,0x88,0x88,0xf8,0x00,
	0x00,0xf8,0x88,0x08,0x08,0x10,0x60,0x00,
	0x80,0x40,0x08,0x08,0x10,0x20,0xc0,0x00,
	0xa0,0x50,0x00,0x00,0x00,0x00,0x00,0x00,
	0x40,0xa0,0x40,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0xfc,0x00,0x00,0xfc,0x00,0x00,
	0x20,0x20,0x3c,0x20,0x20,0x3c,0x20,0x20,
	0x20,0x20,0xfc,0x20,0x20,0xfc,0x20,0x20,
	0x20,0x20,0xe0,0x20,0x20,0xe0,0x20,0x20,
	0x04,0x0c,0x1c,0x1c,0x3c,0x7c,0xfc,0xfc,
	0x80,0xc0,0xe0,0xe0,0xf0,0xf8,0xfc,0xfc,
	0xfc,0xfc,0x7c,0x3c,0x1c,0x1c,0x0c,0x04,
	0xfc,0xfc,0xf8,0xf0,0xe0,0xe0,0xc0,0x80,
	0x00,0x20,0x70,0xf8,0xf8,0xa8,0x70,0x00,
	0x00,0x50,0xf8,0xf8,0xf8,0x70,0x20,0x00,
	0x00,0x20,0x70,0xf8,0xf8,0x70,0x20,0x00,
	0x00,0x20,0xa8,0xf8,0xf8,0xa8,0x70,0x00,
	0x00,0x70,0xf8,0xf8,0xf8,0x70,0x00,0x00,
	0x00,0x70,0x88,0x88,0x88,0x70,0x00,0x00,
	0x04,0x04,0x08,0x10,0x20,0x20,0x40,0x80,
	0x80,0x80,0x40,0x20,0x10,0x10,0x08,0x04,
	0x84,0x48,0x48,0x30,0x30,0x48,0x48,0x84,
	0xf8,0xa8,0xa8,0xf8,0x88,0x88,0x98,0x00,
	0x40,0x78,0x90,0x78,0x50,0xf8,0x10,0x00,
	0x78,0x48,0x78,0x48,0x78,0x48,0x98,0x00,
	0xf8,0x88,0x88,0xf8,0x88,0x88,0xf8,0x00,
	0x08,0xf8,0xd0,0xf8,0xc8,0xe8,0x18,0x00,
	0x50,0x50,0x88,0x70,0x50,0x50,0xb0,0x00,
	0xd0,0x70,0xf8,0x50,0xc8,0xd0,0x60,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

void g_pset(int x,int y,unsigned int c)
// (x,y)の位置にカラーcで点を描画
{
	unsigned short *ad,d1;

	if(graphmode==0) return;
	if(graphmode!=GMODE_ZOEAGRPH){
		if((unsigned int)x>=(unsigned int)gwidth) return;
		if((unsigned int)y>=(unsigned int)gwidthy) return;
		*(GVRAM+y*gwidth+x)=(unsigned char)c;
	}
	else{
		if((unsigned int)x>=X_RESZ) return;
		if((unsigned int)y>=Y_RESZ) return;
		c&=15;
		ad=(unsigned short *)GVRAM+y*(X_RESZ/4)+x/4;
		d1=~(0xf000>>(x%4)*4);
		c<<=(3-(x%4))*4;
		*ad&=d1;
		*ad|=c;
	}
}

void g_putbmpmn(int x,int y,char m,char n,const unsigned char bmp[])
// 横m*縦nドットのキャラクターを座標x,yに表示
// unsigned char bmp[m*n]配列に、単純にカラー番号を並べる
// カラー番号が0の部分は透明色として扱う
{
	int i,j,k;
	unsigned char *vp;
	const unsigned char *p;
	unsigned short *vph;

	if(graphmode==0) return;
	if(graphmode!=GMODE_ZOEAGRPH){
		if(x<=-m || x>gwidth || y<=-n || y>=gwidthy) return; //画面外
		if(y<0){ //画面上部に切れる場合
			i=0;
			p=bmp-y*m;
		}
		else{
			i=y;
			p=bmp;
		}
		for(;i<y+n;i++){
			if(i>=gwidthy) return; //画面下部に切れる場合
			if(x<0){ //画面左に切れる場合は残る部分のみ描画
				j=0;
				p+=-x;
				vp=GVRAM+i*gwidth;
			}
			else{
				j=x;
				vp=GVRAM+i*gwidth+x;
			}
			for(;j<x+m;j++){
				if(j>=gwidth){ //画面右に切れる場合
					p+=x+m-j;
					break;
				}
				if(*p!=0){ //カラー番号が0の場合、透明として処理
					*vp=*p;
				}
				p++;
				vp++;
			}
		}
	}
	else{
		if(x<=-m || x>=X_RESZ || y<=-n || y>=Y_RESZ) return; //画面外
		if(m<=0 || n<=0) return;
		if(y<0){ //画面上部に切れる場合
			i=0;
			p=bmp-y*m;
		}
		else{
			i=y;
			p=bmp;
		}
		for(;i<y+n;i++){
			if(i>=Y_RESZ) return; //画面下部に切れる場合
			if(x<0){ //画面左に切れる場合は残る部分のみ描画
				j=0;
				p+=-x;
				vph=(unsigned short *)GVRAM+i*(X_RESZ/4);
			}
			else{
				j=x;
				vph=(unsigned short *)GVRAM+i*(X_RESZ/4)+x/4;
			}
			k=j%4;
			if(k!=0){ //16ビット境界の左側描画
				if(k==1){
					if(*p) *vph=(*vph&0xf0ff)|(*p<<8);
					p++;
					j++;
					if(j>=x+m) continue;
				}
				if(k<=2){
					if(*p) *vph=(*vph&0xff0f)|(*p<<4);
					p++;
					j++;
					if(j>=x+m) continue;
				}
				if(*p) *vph=(*vph&0xfff0)|*p;
				p++;
				j++;
				if(j>=x+m) continue;
				vph++;
			}
			//ここから16ビット境界の内部および右側描画
			while(1){
				if(j>=X_RESZ){ //画面右に切れる場合
					p+=x+m-j;
					break;
				}
				if(*p) *vph=(*vph&0x0fff)|(*p<<12);
				p++;
				j++;
				if(j>=x+m) break;
				if(*p) *vph=(*vph&0xf0ff)|(*p<<8);
				p++;
				j++;
				if(j>=x+m) break;
				if(*p) *vph=(*vph&0xff0f)|(*p<<4);
				p++;
				j++;
				if(j>=x+m) break;
				if(*p) *vph=(*vph&0xfff0)|*p;
				p++;
				j++;
				if(j>=x+m) break;
				vph++;
			}
		}
	}
}

void g_clrbmpmn(int x,int y,char m,char n)
// 縦m*横nドットのキャラクター消去
// カラー0で塗りつぶし
{
	int i,j,k;
	unsigned char *vp;
	unsigned short mask,*vph;

	if(graphmode==0) return;
	if(graphmode!=GMODE_ZOEAGRPH){
		if(x<=-m || x>=gwidth || y<=-n || y>=gwidthy) return; //画面外
		if(y<0){ //画面上部に切れる場合
			i=0;
		}
		else{
			i=y;
		}
		for(;i<y+n;i++){
			if(i>=gwidthy) return; //画面下部に切れる場合
			if(x<0){ //画面左に切れる場合は残る部分のみ描画
				j=0;
				vp=GVRAM+i*gwidth;
			}
			else{
				j=x;
				vp=GVRAM+i*gwidth+x;
			}
			for(;j<x+m;j++){
				if(j>=gwidth){ //画面右に切れる場合
					break;
				}
				*vp++=0;
			}
		}
	}
	else{
		if(x<=-m || x>=X_RESZ || y<=-n || y>=Y_RESZ) return; //画面外
		if(m<=0 || n<=0) return;
		if(y<0){ //画面上部に切れる場合
			i=0;
		}
		else{
			i=y;
		}
		for(;i<y+n;i++){
			if(i>=Y_RESZ) return; //画面下部に切れる場合
			if(x<0){ //画面左に切れる場合は残る部分のみ消去
				j=0;
				vph=(unsigned short *)GVRAM+i*(X_RESZ/4);
			}
			else{
				j=x;
				vph=(unsigned short *)GVRAM+i*(X_RESZ/4)+x/4;
			}
			k=j%4;
			if(k!=0){ //16ビット境界の左側消去
				if(k==1){
					*vph&=0xf0ff;
					j++;
					if(j>=x+m) continue;
				}
				if(k<=2){
					*vph&=0xff0f;
					j++;
					if(j>=x+m) continue;
				}
				*vph&=0xfff0;
				j++;
				if(j>=x+m) continue;
				vph++;
			}
			//ここから16ビット境界の内部消去
			for(;j<x+m-3;j+=4){
				if(j>=X_RESZ) break; //画面右に切れる場合
				*vph++=0;
			}
			if(j<X_RESZ){
				k=x+m-j;
				if(k!=0){ //16ビット境界の右側消去
					mask=0xffff>>(k*4);
					*vph&=mask;
				}
			}
		}
	}
}

void g_gline(int x1,int y1,int x2,int y2,unsigned int c)
// (x1,y1)-(x2,y2)にカラーcで線分を描画
{
	int sx,sy,dx,dy,i;
	int e;

	if(x2>x1){
		dx=x2-x1;
		sx=1;
	}
	else{
		dx=x1-x2;
		sx=-1;
	}
	if(y2>y1){
		dy=y2-y1;
		sy=1;
	}
	else{
		dy=y1-y2;
		sy=-1;
	}
	if(dx>=dy){
		e=-dx;
		for(i=0;i<=dx;i++){
			g_pset(x1,y1,c);
			x1+=sx;
			e+=dy*2;
			if(e>=0){
				y1+=sy;
				e-=dx*2;
			}
		}
	}
	else{
		e=-dy;
		for(i=0;i<=dy;i++){
			g_pset(x1,y1,c);
			y1+=sy;
			e+=dx*2;
			if(e>=0){
				x1+=sx;
				e-=dy*2;
			}
		}
	}
}
void g_circle(int x0,int y0,unsigned int r,unsigned int c)
// (x0,y0)を中心に、半径r、カラーcの円を描画
{
	int x,y,f;
	x=r;
	y=0;
	f=-2*r+3;
	while(x>=y){
		g_pset(x0-x,y0-y,c);
		g_pset(x0-x,y0+y,c);
		g_pset(x0+x,y0-y,c);
		g_pset(x0+x,y0+y,c);
		g_pset(x0-y,y0-x,c);
		g_pset(x0-y,y0+x,c);
		g_pset(x0+y,y0-x,c);
		g_pset(x0+y,y0+x,c);
		if(f>=0){
			x--;
			f-=x*4;
		}
		y++;
		f+=y*4+2;
	}
}
void g_hline(int x1,int x2,int y,unsigned int c)
// (x1,y)-(x2,y)の水平ラインをカラーcで高速描画
{
	int temp;
	unsigned int d,*ad;
	unsigned short dh,*adh;

	if(graphmode==0) return;
	if(graphmode!=GMODE_ZOEAGRPH){
		if(y<0 || y>=gwidthy) return;
		if(x1>x2){
			temp=x1;
			x1=x2;
			x2=temp;
		}
		if(x2<0 || x1>=gwidth) return;
		if(x1<0) x1=0;
		if(x2>=gwidth) x2=gwidth-1;
		while(x1&3){
			g_pset(x1++,y,c);
			if(x1>x2) return;
		}
		d=c|(c<<8)|(c<<16)|(c<<24);
		ad=(unsigned int *)(GVRAM+y*gwidth+x1);
		while(x1+3<=x2){
			*ad++=d;
			x1+=4;
		}
		while(x1<=x2) g_pset(x1++,y,c);
	}
	else{
		if(y<0 || y>=Y_RESZ) return;
		if(x1>x2){
			temp=x1;
			x1=x2;
			x2=temp;
		}
		if(x2<0 || x1>=X_RESZ) return;
		if(x1<0) x1=0;
		if(x2>=X_RESZ) x2=X_RESZ-1;
		while(x1&3){
			g_pset(x1++,y,c);
			if(x1>x2) return;
		}
		dh=c|(c<<4)|(c<<8)|(c<<12);
		adh=(unsigned short *)GVRAM+y*(X_RESZ/4)+x1/4;
		while(x1+3<=x2){
			*adh++=dh;
			x1+=4;
		}
		while(x1<=x2) g_pset(x1++,y,c);
	}
}

void g_boxfill(int x1,int y1,int x2,int y2,unsigned int c)
// (x1,y1),(x2,y2)を対角線とするカラーcで塗られた長方形を描画
{
	int temp;

	if(graphmode==0) return;
	if(x1>x2){
		temp=x1;
		x1=x2;
		x2=temp;
	}
	if(x2<0 || x1>=gwidth) return;
	if(y1>y2){
		temp=y1;
		y1=y2;
		y2=temp;
	}
	if(y2<0 || y1>=gwidthy) return;
	if(y1<0) y1=0;
	if(y2>=gwidthy) y2=gwidthy-1;
	while(y1<=y2){
		g_hline(x1,x2,y1++,c);
	}
}
void g_circlefill(int x0,int y0,unsigned int r,unsigned int c)
// (x0,y0)を中心に、半径r、カラーcで塗られた円を描画
{
	int x,y,f;
	x=r;
	y=0;
	f=-2*r+3;
	while(x>=y){
		g_hline(x0-x,x0+x,y0-y,c);
		g_hline(x0-x,x0+x,y0+y,c);
		g_hline(x0-y,x0+y,y0-x,c);
		g_hline(x0-y,x0+y,y0+x,c);
		if(f>=0){
			x--;
			f-=x*4;
		}
		y++;
		f+=y*4+2;
	}
}
void g_putfont(int x,int y,unsigned int c,int bc,unsigned char n)
//8*8ドットのアルファベットフォント表示
//座標（x,y)、カラー番号c
//bc:バックグランドカラー、負数の場合無視
//n:文字番号
{
	int i,j,k;
	unsigned char d;
	const unsigned char *p;
	unsigned int d1,mask;
	unsigned short *ad;

	if(graphmode==0) return;
	if(graphmode!=GMODE_ZOEAGRPH){
		p=Fontp+n*8;
		for(i=0;i<8;i++){
			d=*p++;
			for(j=0;j<8;j++){
				if(d&0x80) g_pset(x+j,y+i,c);
				else if(bc>=0) g_pset(x+j,y+i,bc);
				d<<=1;
			}
		}
	}
	else{
		p=Fontp+n*8;
		c&=15;
		if(bc>=0) bc&=15;
		if(x<0 || x+7>=X_RESZ || y<0 || y+7>=Y_RESZ){
			for(i=0;i<8;i++){
				d=*p++;
				for(j=0;j<8;j++){
					if(d&0x80) g_pset(x+j,y+i,c);
					else if(bc>=0) g_pset(x+j,y+i,bc);
					d<<=1;
				}
			}
			return;
		}
		ad=(unsigned short *)GVRAM+y*(X_RESZ/4)+x/4;
		k=x&3;
		for(i=0;i<8;i++){
			d=*p;
			d1=0;
			mask=0;
			for(j=0;j<8;j++){
				d1<<=4;
				mask<<=4;
				if(d&0x80) d1+=c;
				else if(bc>=0) d1+=bc;
				else mask+=15;
				d<<=1;
			}
			if(k==0){
				if(bc>=0){
					*ad=d1>>16;
					*(ad+1)=(unsigned short)d1;
				}
				else{
					*ad=(*ad & (mask>>16))|(d1>>16);
					*(ad+1)=(*(ad+1) & (unsigned short)mask)|(unsigned short)d1;
				}
			}
			else if(k==1){
				if(bc>=0){
					*ad=(*ad & 0xf000)|(d1>>20);
					*(ad+1)=(unsigned short)(d1>>4);
					*(ad+2)=(*(ad+2) & 0x0fff)|((unsigned short)d1<<12);
				}
				else{
					*ad=(*ad & ((mask>>20)|0xf000))|(d1>>20);
					*(ad+1)=(*(ad+1) & (unsigned short)(mask>>4))|(unsigned short)(d1>>4);
					*(ad+2)=(*(ad+2) & (((unsigned short)mask<<12)|0x0fff))|((unsigned short)d1<<12);
				}
			}
			else if(k==2){
				if(bc>=0){
					*ad=(*ad & 0xff00)|(d1>>24);
					*(ad+1)=(unsigned short)(d1>>8);
					*(ad+2)=(*(ad+2) & 0x00ff)|((unsigned short)d1<<8);
				}
				else{
					*ad=(*ad & ((mask>>24)|0xff00))|(d1>>24);
					*(ad+1)=(*(ad+1) & (unsigned short)(mask>>8))|(unsigned short)(d1>>8);
					*(ad+2)=(*(ad+2) & (((unsigned short)mask<<8)|0x00ff))|((unsigned short)d1<<8);
				}
			}
			else{
				if(bc>=0){
					*ad=(*ad & 0xfff0)|(d1>>28);
					*(ad+1)=(unsigned short)(d1>>12);
					*(ad+2)=(*(ad+2) & 0x000f)|((unsigned short)d1<<4);
				}
				else{
					*ad=(*ad & ((mask>>28)|0xfff0))|(d1>>28);
					*(ad+1)=(*(ad+1) & (unsigned short)(mask>>12))|(unsigned short)(d1>>12);
					*(ad+2)=(*(ad+2) & (((unsigned short)mask<<4)|0x000f))|((unsigned short)d1<<4);
				}
			}
			p++;
			ad+=X_RESZ/4;
		}
	}
}

void g_printstr(int x,int y,unsigned int c,int bc,unsigned char *s){
	//座標(x,y)からカラー番号cで文字列sを表示、bc:バックグランドカラー
	while(*s){
		g_putfont(x,y,c,bc,*s++);
		x+=8;
	}
}
void g_printnum(int x,int y,unsigned char c,int bc,unsigned int n){
	//座標(x,y)にカラー番号cで数値nを表示、bc:バックグランドカラー
	unsigned int d,e;
	d=10;
	e=0;
	while(n>=d){
		e++;
		if(e==9) break;
		d*=10;
	}
	x+=e*8;
	do{
		g_putfont(x,y,c,bc,'0'+n%10);
		n/=10;
		x-=8;
	}while(n!=0);
}
void g_printnum2(int x,int y,unsigned char c,int bc,unsigned int n,unsigned char e){
	//座標(x,y)にカラー番号cで数値nを表示、bc:バックグランドカラー、e桁で表示
	if(e==0) return;
	x+=(e-1)*8;
	do{
		g_putfont(x,y,c,bc,'0'+n%10);
		e--;
		n/=10;
		x-=8;
	}while(e!=0 && n!=0);
	while(e!=0){
		g_putfont(x,y,c,bc,' ');
		x-=8;
		e--;
	}
}
unsigned int g_color(int x,int y){
	//座標(x,y)のVRAM上の現在のパレット番号を返す、画面外は0を返す
	unsigned short *ad;

	if(graphmode==0) return 0;
	if(graphmode!=GMODE_ZOEAGRPH){
		if((unsigned int)x>=(unsigned int)gwidth) return 0;
		if((unsigned int)y>=(unsigned int)gwidthy) return 0;
		return *(GVRAM+y*gwidth+x);
	}
	else{
		if((unsigned int)x>=X_RESZ) return 0;
		if((unsigned int)y>=Y_RESZ) return 0;
		ad=(unsigned short *)GVRAM+y*(X_RESZ/4)+x/4;
		return (*ad >>(3-(x&3))*4) & 0xf;
	}
}

unsigned char *cursor=TVRAM;
unsigned char cursorcolor=7;

void vramscroll(void){
	unsigned int *p1,*p2;
	unsigned short *hp1,*hp2;

	if(twidth%4==0){
		p1=(unsigned int *)TVRAM;
		p2=(unsigned int *)(TVRAM+twidth);
		while(p2<(unsigned int *)(TVRAM+attroffset)){
			*(p1+attroffset/4)=*(p2+attroffset/4);
			*p1++=*p2++;
		}
		while(p1<(unsigned int *)(TVRAM+attroffset)){
			*(p1+attroffset/4)=0;
			*p1++=0;
		}
	}
	else{
		hp1=(unsigned short *)TVRAM;
		hp2=(unsigned short *)(TVRAM+twidth);
		while(hp2<(unsigned short *)(TVRAM+attroffset)){
			*(hp1+attroffset/2)=*(hp2+attroffset/2);
			*hp1++=*hp2++;
		}
		while(hp1<(unsigned short *)(TVRAM+attroffset)){
			*(hp1+attroffset/2)=0;
			*hp1++=0;
		}
	}
}
void setcursor(unsigned char x,unsigned char y,unsigned char c){
	//カーソルを座標(x,y)にカラー番号cに設定
	if(x>=twidth || y>=WIDTH_Y) return;
	cursor=TVRAM+y*twidth+x;
	cursorcolor=c;
}
void setcursorcolor(unsigned char c){
	//カーソル位置そのままでカラー番号をcに設定
	cursorcolor=c;
}
void printchar(unsigned char n){
	//カーソル位置にテキストコードnを1文字表示し、カーソルを1文字進める
	if(cursor<TVRAM || cursor>TVRAM+twidth*WIDTH_Y) return;
	if(cursor==TVRAM+twidth*WIDTH_Y){
		vramscroll();
		cursor=TVRAM+twidth*(WIDTH_Y-1);
	}
	if(n=='\n'){
		//改行
		cursor+=twidth-((cursor-TVRAM)%twidth);
	} else{
		*cursor=n;
		*(cursor+attroffset)=cursorcolor;
		cursor++;
	}
}
void printstr(unsigned char *s){
	//カーソル位置に文字列sを表示
	while(*s){
		printchar(*s++);
	}
}
void printnum(unsigned int n){
	//カーソル位置に符号なし整数nを10進数表示
	unsigned int d,n1;
	n1=n/10;
	d=1;
	while(n1>=d){
		d*=10;
	}
	while(d!=0){
		printchar('0'+n/d);
		n%=d;
		d/=10;
	}
}
void printnum2(unsigned int n,unsigned char e){
	//カーソル位置に符号なし整数nをe桁の10進数表示（前の空き桁部分はスペースで埋める）
	unsigned int d,n1;
	if(e==0) return;
	n1=n/10;
	d=1;
	e--;
	while(e>0 && n1>=d){
		d*=10;
		e--;
	}
	if(e==0 && n1>d) n%=d*10;
	for(;e>0;e--) printchar(' ');
	while(d!=0){
		printchar('0'+n/d);
		n%=d;
		d/=10;
	}
}

void cls(void){
	//テキスト画面を0でクリアし、カーソルを画面先頭に移動
	clearscreen();
}

void startPCG(unsigned char *p,int a){
// RAMフォント（PCG）の利用開始
// p：RAMフォントの格納アドレス（8*256＝2048バイト）
// a： システムフォントからのコピー指定。0の場合コピーなし、0以外でコピー
	int i;
	if(a){
		for(i=0;i<8*256;i++) *p++=fontdata[i];
		Fontp=p-8*256;
	}
	else Fontp=p;
}
void stopPCG(void){
// RAMフォント（PCG）の利用停止
	Fontp=fontdata;
}
